{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7ba5bd90\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"strong\"\n}, \"To-Do List\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  key: 0\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = {\n  \"aria-label\": \"Page navigation example\"\n};\nconst _hoisted_7 = {\n  class: \"pagination\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"page-link\"\n}, \"Previous\", -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = [_hoisted_8];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  class: \"page-link\",\n  href: \"#\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"page-link\"\n}, \"Next\", -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = [_hoisted_12];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TodoSimpleForm = _resolveComponent(\"TodoSimpleForm\");\n\n  const _component_TodoList = _resolveComponent(\"TodoList\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchText = $event),\n    placeholder: \"Search\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.searchText]]), _hoisted_3, _createVNode(_component_TodoSimpleForm, {\n    onAddTodo: $setup.addTodo\n  }, null, 8\n  /* PROPS */\n  , [\"onAddTodo\"]), !$setup.filteredTodos.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" Nothing \")) : _createCommentVNode(\"v-if\", true), _createVNode(_component_TodoList, {\n    todos: $setup.filteredTodos,\n    onToggleTodo: $setup.toggleTodo,\n    onDeleteTodo: $setup.deleteTodo\n  }, null, 8\n  /* PROPS */\n  , [\"todos\", \"onToggleTodo\", \"onDeleteTodo\"]), _hoisted_5, _createElementVNode(\"nav\", _hoisted_6, [_createElementVNode(\"ul\", _hoisted_7, [$setup.curPage !== 1 ? (_openBlock(), _createElementBlock(\"li\", {\n    key: 0,\n    class: \"page-item\",\n    onClick: _cache[1] || (_cache[1] = $event => $setup.getTodo($setup.curPage - 1))\n  }, _hoisted_9)) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.numOfPages, page => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: page,\n      class: _normalizeClass([$setup.curPage === page ? _ctx.active : '', \"page-item\"]),\n      onClick: $event => $setup.getTodo(page)\n    }, [_createElementVNode(\"a\", _hoisted_11, _toDisplayString(page), 1\n    /* TEXT */\n    )], 10\n    /* CLASS, PROPS */\n    , _hoisted_10);\n  }), 128\n  /* KEYED_FRAGMENT */\n  )), $setup.curPage !== $setup.numOfPages ? (_openBlock(), _createElementBlock(\"li\", {\n    key: 1,\n    class: \"page-item\",\n    onClick: _cache[2] || (_cache[2] = $event => {\n      $setup.getTodo($setup.curPage + 1);\n      $setup.curPage = $setup.curPage + 1;\n    })\n  }, _hoisted_13)) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"mappings":";;;;;AAEOA,OAAK,EAAC;;;gEACTC,oBAAkC,IAAlC,EAAkC;AAA9BD,OAAK,EAAC;AAAwB,CAAlC,EAAmB,YAAnB,EAA6B;AAAA;AAA7B;;gEAEAC,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;;;;;gEAKAA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;;AACK,gBAAW;;;AACVD,OAAK,EAAC;;;gEAEqBC,oBAAkC,GAAlC,EAAkC;AAA/BD,OAAK,EAAC;AAAyB,CAAlC,EAAsB,UAAtB,EAA8B;AAAA;AAA9B;;oBAAAE;;;AAKRF,OAAK,EAAC;AAAYG,MAAI,EAAC;;;iEAGKF,oBAA8B,GAA9B,EAA8B;AAA3BD,OAAK,EAAC;AAAqB,CAA9B,EAAsB,MAAtB,EAA0B;AAAA;AAA1B;;qBAAAI;;;;;;uBApBvDC,oBAwBM,KAxBN,cAwBM,CAvBJC,UAuBI,kBAtBJL,oBAAkF,OAAlF,EAAkF;AAA3EM,QAAI,EAAC,MAAsE;AAA/DP,SAAK,EAAC,cAAyD;+DAAjCQ,oBAAUC,OAAuB;AAArBC,eAAW,EAAC;AAAS,GAAlF;;AAAA,oBAAiDF,oBAsB7C,EArBJG,UAqBI,EApBJC,aAAqDC,yBAArD,EAAqD;AAApCC,aAAQ,EAAEN;AAA0B,GAArD,EAAkC,IAAlC,EAAkC;AAAA;AAAlC,IAAkC,aAAlC,CAoBI,GAnBQA,qBAAcO,wBAA1BV,oBAAiD,KAAjD,EAAiDW,UAAjD,EAAkC,WAAlC,sCAmBI,EAlBJJ,aAAgGK,mBAAhG,EAAgG;AAArFC,SAAK,EAAEV,oBAA8E;AAA9DW,gBAAW,EAAEX,iBAAiD;AAApCY,gBAAW,EAAEZ;AAAuB,GAAhG;;AAAA,8CAkBI,EAhBJa,UAgBI,EAfJpB,oBAaM,KAbN,cAaM,CAZJA,oBAWK,IAXL,cAWK,CAVyBO,mBAAO,mBAAnCH,oBACoE,IADpE,EACoE;UAAA;AADhEL,SAAK,EAAC,WAC0D;AAAlEsB,WAAK,sCAAEd,eAAQA,iBAAO,CAAf,CAAF;AAA6D,GADpE,kDAUG,qBAPHH,oBAGmEkB,SAHnE,EAGmE,IAHnE,EAGmEC,YAHhDhB,iBAGgD,EAHxDiB,IAAkB,IAAd;yBAAfpB,oBAGmE,IAHnE,EAGmE;AAFlEqB,SAAG,EAAED,IAE6D;AAFtDzB,WAAK,mBAAEQ,mBAAYiB,IAAZ,GAAkBE,WAAlB,GAAwB,EAA1B,EAEZ,WAFY,EAEiD;AADlEL,aAAK,YAAEd,eAAQiB,IAAR;AAC2D,KAHnE,GAGkBxB,oBAA4C,GAA5C,eAA4C2B,iBAAXH,IAAW,CAA5C,EAAqC;AAAA;AAArC,MAHlB;;AAAA;GAGmE,CAHnE;;AAAA,GAOG,GAFyBjB,mBAAYA,mCAAxCH,oBACoF,IADpF,EACoF;UAAA;AADhFL,SAAK,EAAC,WAC0E;AAAnFsB,WAAK;AAAEd,qBAAQA,iBAAO,CAAf;AAAoBA,uBAAUA,iBAAO,CAAjB;AAAiB,KAAvC;AAA8E,GADpF,mDAEG,CAXL,CAYI,CAbN,CAeI,CAxBN","names":["class","_createElementVNode","_hoisted_8","href","_hoisted_12","_createElementBlock","_hoisted_2","type","$setup","$event","placeholder","_hoisted_3","_createVNode","_component_TodoSimpleForm","onAddTodo","length","_hoisted_4","_component_TodoList","todos","onToggleTodo","onDeleteTodo","_hoisted_5","onClick","_Fragment","_renderList","page","key","_ctx","_toDisplayString"],"sourceRoot":"","sources":["E:\\vue\\vue_todo\\src\\App.vue"],"sourcesContent":["<template>\n\n  <div class=\"container\">\n    <h2 class=\"strong\">To-Do List</h2>\n    <input type=\"text\" class=\"form-control\" v-model=\"searchText\" placeholder=\"Search\">\n    <hr>\n    <TodoSimpleForm @add-todo=\"addTodo\"></TodoSimpleForm>\n    <div v-if=\"!filteredTodos.length\"> Nothing </div>\n    <TodoList :todos=\"filteredTodos\" @toggle-todo=\"toggleTodo\" @delete-todo=\"deleteTodo\"></TodoList>\n\n    <hr>\n    <nav aria-label=\"Page navigation example\">\n      <ul class=\"pagination\">\n        <li class=\"page-item\" v-if=\"curPage !== 1\"\n         @click='getTodo(curPage-1)'><a class=\"page-link\" >Previous</a></li>\n       \n        <li v-for=\"page in numOfPages\" \n        :key=\"page\" :class=\"curPage === page? active:''\"\n        @click='getTodo(page)'\n        class=\"page-item\"><a class=\"page-link\" href=\"#\">{{ page }}</a></li>\n\n        <li class=\"page-item\" v-if=\"curPage !== numOfPages\"\n        @click='getTodo(curPage+1); curPage = curPage+1'><a class=\"page-link\" >Next</a></li>\n      </ul>\n    </nav>\n\n  </div>\n\n</template>\n\n<script>\n  import {\n    ref,\n    computed\n  } from 'vue'\n  import TodoSimpleForm from './components/TodoSimpleForm.vue'\n  import TodoList from './components/TodoList.vue'\n  import axios from 'axios'\n\n  export default {\n    name: 'App',\n    components: {\n      TodoSimpleForm,\n      TodoList\n\n    },\n    setup() {\n      const todos = ref([]);\n      const totalPage = ref(0);\n      const numOfTodos = ref(0);\n      const limit = 5;\n      const curPage = ref(1);\n\n      const numOfPages = computed(()=>{\n        return Math.ceil(numOfTodos.value/limit)\n      })\n\n      const getTodo = async (page = curPage.value) => {\n        try {\n          const res = await axios.get(`http://localhost:3000/todos?_page=${page}&_limit=${limit}`)\n          todos.value = res.data;\n          console.log(res.headers['x-total-count'])\n          numOfTodos.value = res.headers['x-total-count'];\n          \n        } catch (err) {\n          console.error(err)\n        }\n\n      }\n      getTodo();\n\n      const addTodo = async (todo) => {\n        try {\n          const res = await axios.post('http://localhost:3000/todos', {\n            subject: todo.subject,\n            completed: todo.completed,\n          })\n          todos.value.push(res.data);\n        } catch (err) {\n          console.error(err)\n        }\n\n      }\n      const deleteTodo = async (index) => {\n        const id = todos.value[index].id;\n        try {\n          await axios.delete('http://localhost:3000/todos/' + id)\n          todos.value.splice(index, 1);\n          getTodo();\n\n        } catch (err) {\n          console.error(err)\n        }\n\n      }\n\n      const toggleTodo = async (index) => {\n        \n        try {\n          await axios.patch('http://localhost:3000/todos/' + index, {\n            completed: !todos.value[index].completed\n          })\n          todos.value[index].completed = !todos.value[index].completed\n\n        } catch (err) {\n          console.error(err)\n        }\n      }\n\n      const searchText = ref('');\n\n      const filteredTodos = computed(() => {\n        if (searchText.value) {\n          return todos.value.filter(todo => {\n            return todo.subject.includes(searchText.value)\n          });\n        }\n        return todos.value;\n      })\n\n      return {\n        todos,\n        getTodo,\n        addTodo,\n        deleteTodo,\n        toggleTodo,\n        searchText,\n        filteredTodos,\n        numOfPages,\n        curPage,\n      }\n    },\n\n  }\n</script>\n\n<style scoped>\nnav a{\n  cursor:pointer;\n}\n</style>"]},"metadata":{},"sourceType":"module"}